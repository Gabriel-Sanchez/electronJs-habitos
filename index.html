<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'"> -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'"> -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://unpkg.com https://cdn.jsdelivr.net; script-src 'self' 'unsafe-inline' https://d3js.org https://unpkg.com https://cdn.jsdelivr.net;">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.min.js"></script>
    <title>Habitos</title>
    <link rel="stylesheet" href="./node_modules/cal-heatmap/cal-heatmap.css">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="all.css">
    <link rel="stylesheet" href="node_modules/material-icons/iconfont/material-icons.css">
    <script src="index.js"></script>

    <link rel="stylesheet" href="grafico/grafico.css">
    <link rel="stylesheet" href="all.css">

    <link rel="stylesheet" href="node_modules/cal-heatmap/cal-heatmap.css" />
    <link rel="stylesheet" href="node_modules/cal-heatmap/cal-heatmap.js" />
    <link rel="stylesheet" href="node_modules/cal-heatmap/cal-heatmap.min.js" />
    <link rel="stylesheet" href="node_modules/d3/d3.js" />

    <script src="grafico/grafico.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


  </head>
  <body>


 

    <!-- <ul id="list">
      Los elementos de la lista ser√°n a√±adidos aqu√≠ por JavaScript
  </ul> -->



    <!-- <script>
      function saveListToFile(list) {
        // Convierte la lista a una cadena JSON
        const data = JSON.stringify(list);
    
        // Escribe la cadena JSON en un archivo
        fs.writeFile('list.json', data, (err) => {
            if (err) {
                console.error('Hubo un error al escribir el archivo', err);
            } else {
                console.log('Archivo guardado con √©xito');
            }
        });
    }
    
      // Elemento <ul> que ser√° ordenado
const menuList = document.querySelector("#list");

// Conjunto de datos a ordenar arrastrando y soltando
let listElements = ["gato üêà", "loro ü¶ú", "elefante üêò", "serpiente üêç"];

// Renderiza los elementos <li> en cada cambio de datos
function renderUpdateList(list, target) {
    // Limpia todos los <li> anteriores
    target.textContent = "";

    // Se itera cada elemento de la lista para crear un <li>
    list.forEach((value, index) => {
        const myLi = document.createElement("li");
        myLi.textContent = value;
        myLi.setAttribute("draggable", "true");
        myLi.setAttribute("data-key", index);  // A√±ade el atributo data-key

        // Eventos
        myLi.addEventListener("drop", eventDrop);
        myLi.addEventListener("dragover", eventDragOver);

        // Se a√±ade al documento
        target.appendChild(myLi);
    });
}

// Drag Start - <li> que se est√° arrastrando.
let myDragElement = undefined;

menuList.addEventListener("dragstart", (event) => {
    // Guarda qu√© elemento se est√° moviendo.
    myDragElement = event.target;
});

// Drag over - <li> que est√° debajo del elemento que se est√° arrastrando.
let eventDragOverIndex = -1;

function eventDragOver(event) {
    event.preventDefault();
}

function eventDrop(event) {
    event.preventDefault();

    // Obtiene los √≠ndices de los elementos implicados
    let dragIndex = myDragElement.dataset.key;
    let dropIndex = event.target.dataset.key;

    // Mueve el elemento arrastrado a la nueva posici√≥n
    listElements.splice(dropIndex, 0, listElements.splice(dragIndex, 1)[0]);

    // Renderiza la lista actualizada
    renderUpdateList(listElements, menuList);

    saveListToFile(listElements);
}

// Inicializa la lista
renderUpdateList(listElements, menuList);

    </script> -->

    <!-- <div id="cal-heatmap"></div>

    <script type="module">
      import * as d3 from 'd3';
      import * as CalHeatMap from 'cal-heatmap';
    </script>

    <script type="text/javascript">

      const d3 = require('d3');
      const CalHeatMap = require('cal-heatmap');
      
  

  datasjs =  {
    "1258185600": 2.77,
    "1258272000": 2.52,
    "1258358400": 3.23,
    "1258444800": 2.06,
    "1258617600": 2.62,
    "1258704000": 3.9,
    "1258790400": 3.41,
    "1258963200": 0,
    "1259049600": 0,
    "1259136000": 3.16,
    "1259308800": 2.97,
    "1259395200": 2.79,
    "1259481600": 3.65,
    "1259654400": 1.9,
    "1259740800": 3.46,
    "1259827200": 3.93,
    "1260000000": 4.1
  }

  var cal = new CalHeatMap();
  cal.init({
    data: datasjs,
    start: new Date(2009, 10, 1),
    id: "cal-heatmap",
    domain: "month",
    subDomain: "x_day",
    cellSize: 15,
    cellpadding: 3,
    domainGutter: 15
  });
  


 
  
</script> -->

    <!-- <div id="heatmap">
      
    </div>

    <svg id="miSVG" >
    </svg> -->
    

    <div class="columnas">
      <div class="columna1">

        <div id="ventana1" class="ventana">
          <!-- <h1>Ventana 1</h1> -->
          <!-- <button onclick="cambiarVentana('ventana2')">Ir a la ventana 2</button> -->
          

          <!-- <progress value="0" max="100"></progress>
          <h3 id="porcentaje_dia"></h3> -->


          <style>
            .progress-bar {
              position: relative;
              width: 100%;
              height: 35px;
              
            }
            
            progress {
            
              
              width: 100%;
              height: 100%;

              margin: 0;
              padding: 0;
              
            }
        

          progress {
            accent-color: #3687c0; /* Color de la barra de progreso */
        }
          


            
            .progress-text {
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              display: flex;
              justify-content: center;
              align-items: center;
              font-size: 1em;
              color: black;
             
            }
            .contenedor-bar{
              margin-left: 10px;
              margin-right: 10px;
              
            }

         
            
          </style>

          <div class="conotenedor-superior">

            <div class="contenedor_datos_superior" >

              <button class="material-icons" onclick="configurar_habito_nuevo()" >  add</button>
              
              <h4 id="tiempo_restante"></h4>
              <h4 id="horas_completadas"></h4>
              <h4 id="tareas_restantes"></h4>
            </div>

           

            
            <div class="contenedor-bar">
              
              
              <div class="progress-bar">
                <progress value="0" max="100"></progress>
                <div class="progress-text">0%</div>
              </div>
            </div>
            
            
            
          </div>

          <script>
            // Obt√©n el elemento progress
            let barraProgreso = document.querySelector('progress');
            let textoProgreso = document.querySelector('.progress-text');

function Calcula_porcentaje_dia(){

  let ahora = new Date();
  let totalMinutosHoy = ahora.getHours() * 60 + ahora.getMinutes();
  let totalMinutosDia = 24 * 60;

  // Calcula el porcentaje del d√≠a que ha pasado
  let porcentajeDiaPasado = (totalMinutosHoy / totalMinutosDia) * 100;

  // Actualiza el valor de la barra de progreso
  barraProgreso.value = porcentajeDiaPasado;

  // Actualiza el texto con el porcentaje del d√≠a que ha pasado
  textoProgreso.textContent = porcentajeDiaPasado.toFixed(2) + '% del d√≠a';

  console.log(barraProgreso.value)
  dia_porcentaje = document.getElementById('porcentaje_dia')
  //dia_porcentaje.innerText = porcentajeDiaPasado.toFixed(2) + '% del d√≠a'
}

Calcula_porcentaje_dia()

// Actualiza la barra de progreso cada minuto
setInterval(() => {
  console.log('p')
  Calcula_porcentaje_dia()
}, 60000); // 60000 milisegundos equivalen a un minuto

          </script>



          <div class="detalles_lista">

            <ul id="miLista">
          </div>
          </ul>
          <details id="details_lista_hecha">
            <summary>Tareas completadas hoy</summary>
            <ul id="miLista_hechos">
          </details>
          </ul>
          <details id="details_lista_hecha">
            <summary>Tareas Archivadas</summary>
            <ul id="miLista_archivados">
          </details>
          </ul>
        </div>
        
        <div id="ventana2" class="ventana" style="display: none;">
          <!-- <h1>Ventana 2</h1> -->
          <div class="botones_superior">
            <button class="material-icons" onclick="cambiarVentana('ventana1')">arrow_back</button>
            <button class="material-icons" id="boton_borrar" onclick="eliminar_habito()">delete</button>
            <button class="material-icons" id="archivar_borrar" onclick="archivarHabito(1)">archive</button>
            <button class="material-icons" id="des_archivar_borrar" onclick="archivarHabito(0)">unarchive</button>

          </div>
          <h2 id="titulo_habito"></h2>
          <div class="contenedor_formulario">

          
          <div id="formDiv" >
          
            <label  for="nombre">Nombre:</label>
            <input class="imput_form" type="hidden" id="id" name="id">
            <input class="imput_form" type="hidden" id="orden_n" name="orden_n">
            <input class="imput_form" type="text" id="nombre" name="nombre">
            <label for="work_time">Work Time:</label>
            <input  class="imput_form" type="number" id="work_time" name="work_time">
            <label for="short_break">Short Break:</label>
            <input class="imput_form" type="number" id="short_break" name="short_break">
            <label for="count">Count:</label>
            <input class="imput_form" type="number" id="count" name="count">
            <label for="type">Type:</label>
            <select class="imput_form" id="type" name="type">
                <option value="1">Pomodoro</option>
                <option value="2">Checker</option>
            </select>
            <div id="colorPalette"></div>
            <input class="imput_form" type="hidden" id="color_hab" name="color_hab">
            <input class="imput_form" type="hidden" id="archivado" name="archivado">
            <button id="boton_agregar" onclick="guardar_habito_json()">Guardar</button>
        </div>
        </div>
      </div>
        
      <style>
        #colorPalette {
          display: flex;
          justify-content: space-around;
          margin-top: 10px;
      
      }
      
      .color {
          width: 50px;
          height: 50px;
          border-radius: 5px;
      }
      
      </style>

      <script>
        let colorPalette = document.getElementById('colorPalette');
        let colorDelHabito = document.getElementById('color_hab')
let colors = ['red', 'orange', 'yellow', 'green', 'blue', 'indigo', 'violet', 'pink']; // Reemplaza estos colores con los de tu lista

let selectedColor;

colors.forEach(function(color) {
    let colorDiv = document.createElement('div');
    colorDiv.className = 'color';
    colorDiv.style.backgroundColor = color;
    colorDiv.addEventListener('click', function() {
        selectedColor = color; // Guardar el color seleccionado
        console.log('Color seleccionado:', selectedColor); // Imprimir el color seleccionado en la consola


        var divsHijos = colorPalette.getElementsByTagName('div');

// Recorre cada div hijo y elimina el borde
        for (var i = 0; i < divsHijos.length; i++) {
            divsHijos[i].style.border = "none";
        }
        colorDiv.style.border = '3px solid black'
        colorDelHabito.value = selectedColor

      
    });
    colorPalette.appendChild(colorDiv);
});


      </script>

        
   
      
      
      
      </div>
      <div class="columna2">



            <!-- <script>
              let ctx = document.getElementById('myChart').getContext('2d');
              let myChart = new Chart(ctx, {
                  type: 'bar',
                  data: {
                      labels: ['Rojo', 'Azul', 'Amarillo', 'Verde', 'Morado', 'Naranja'],
                      datasets: [{
                          label: '# de votos',
                          data: [12, 19, 3, 5, 2, 3],
                          backgroundColor: [
                              'rgba(255, 99, 132, 0.2)',
                              'rgba(54, 162, 235, 0.2)',
                              'rgba(255, 206, 86, 0.2)',
                              'rgba(75, 192, 192, 0.2)',
                              'rgba(153, 102, 255, 0.2)',
                              'rgba(255, 159, 64, 0.2)'
                          ],
                          borderColor: [
                              'rgba(255, 99, 132, 1)',
                              'rgba(54, 162, 235, 1)',
                              'rgba(255, 206, 86, 1)',
                              'rgba(75, 192, 192, 1)',
                              'rgba(153, 102, 255, 1)',
                              'rgba(255, 159, 64, 1)'
                          ],
                          borderWidth: 1
                      }]
                  },
                  options: {
                      scales: {
                          y: {
                              beginAtZero: true
                          }
                      }
                  }
              });
            </script> -->

                  <!-- <canvas id="myChart" width="800" height="400"></canvas> -->

        <div class="heatmap_principal">

          <div id="header"></div>
         
          <div class="center_div arriba_e">
              <div  id="cal-heatmap"></div>
          </div>
          <div class="center_div" >
            <button id="minDate-previous_year"><</button>
            <button id="minDate-next_year">></button>
        </div>
          <div>
              <div id="mes_habito"></div>
              <div class="center_div" >
                  
                  <button id="minDate-previous"><</button>
                  <button id="minDate-next">></button>
              </div>
              
          </div>
          <div id="onClick-placeholder"></div>
      </div>

      
      <style>
        /* Estilos opcionales para los botones */
        .button-container {
          display: flex;
          justify-content: space-between;
          margin-bottom: 20px;
        }
        .button-container button {
          padding: 10px 20px;
          font-size: 14px;
          cursor: pointer;
        }
      </style>

    

<div style="justify-content: center; display: flex;" >

 

<div style="width: 1000px; height: 300px;">
  <div class="button-container">
    <button id="prevButton"><</button>
    <button id="nextButton">></button>
  </div>
  <canvas id="myChart"></canvas>
</div>
</div>

<!-- <script src="node_modules/chart.js/dist/chart.js"></script> -->


<script>
  let currentYearIndex_graf = 0;
  let currentChart_graf = null;
  let years_graf = []; // Definir la variable years en un √°mbito m√°s amplio
  let duracionesPorAnio_graf = {}; // Hacer duracionesPorAnio global

  function generarGraficoDuracionPorAnio(id) {
    currentYearIndex_graf = 0;
    duracionesPorAnio_graf = {}; // Limpiar duracionesPorAnio

    const data = fs.readFileSync('historial_habitos.csv', 'utf8');
    const records = Papa.parse(data, {
      header: true,
      skipEmptyLines: true
    }).data;

    const filteredData = records.filter(record => record.id_habito === id);

    filteredData.forEach(record => {
      const fecha = new Date(record.fecha);
      const anio = fecha.getFullYear();

      if (!duracionesPorAnio_graf[anio]) {
        duracionesPorAnio_graf[anio] = {};
      }

      const diaDelAnio = Math.floor((fecha - new Date(anio, 0, 0)) / (1000 * 60 * 60 * 24));
      const duracionArray = record.duracion.split(':').map(Number);
      const duracionEnMinutos = duracionArray[0] * 60 + duracionArray[1] + duracionArray[2] / 60;

      if (!duracionesPorAnio_graf[anio][diaDelAnio]) {
        duracionesPorAnio_graf[anio][diaDelAnio] = 0;
      }

      duracionesPorAnio_graf[anio][diaDelAnio] += duracionEnMinutos;
    });

    years_graf = Object.keys(duracionesPorAnio_graf);

    function updateChart_graf(year) {
      console.log(duracionesPorAnio_graf);
      const diasDelAnio = 365;
      let duraciones = Array.from({ length: diasDelAnio }, () => 0);
      let labels = Array.from({ length: diasDelAnio }, (_, idx) => {
        const fecha = new Date(new Date(year, 0));
        fecha.setDate(idx + 1);
        return fecha.toLocaleDateString('es-ES', { month: 'short', day: 'numeric' });
      });

      if (duracionesPorAnio_graf[year]) {
        duraciones = Array.from({ length: diasDelAnio }, (_, idx) => duracionesPorAnio_graf[year][idx] || 0);
      }

      if (currentChart_graf) {
        currentChart_graf.destroy();
      }

      const ctx = document.getElementById('myChart');
      ctx.style.height = '100px';
      currentChart_graf = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [{
            label: `${year}-min`,
            data: duraciones,
            backgroundColor: 'rgba(54, 162, 235, 0.5)',
            borderColor: 'rgba(54, 162, 235, 1)',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Horas'
              }
            },
            x: {
              display: true,
              title: {
                display: true,
                text: 'Fechas'
              }
            }
          }
        },
        plugins: {
          title: {
            display: false,
            text: 'T√≠tulo del gr√°fico'
          }
        }
      });
    }

    function handlePrevButtonClick() {
      if (currentYearIndex_graf > 0) {
        currentYearIndex_graf--;
        updateChart_graf(years_graf[currentYearIndex_graf]);
      }
    }

    function handleNextButtonClick() {
      if (currentYearIndex_graf < years_graf.length - 1) {
        currentYearIndex_graf++;
        updateChart_graf(years_graf[currentYearIndex_graf]);
      }
    }

    const prevButton = document.getElementById('prevButton');
    const nextButton = document.getElementById('nextButton');

    prevButton.removeEventListener('click', handlePrevButtonClick);
    nextButton.removeEventListener('click', handleNextButtonClick);

    prevButton.addEventListener('click', handlePrevButtonClick);
    nextButton.addEventListener('click', handleNextButtonClick);


    const latestYear = years_graf.reduce((latest, year) => (parseInt(year) > parseInt(latest) ? year : latest), years_graf[0]);

    // Mostrar primero el a√±o m√°s reciente
    currentYearIndex_graf = years_graf.indexOf(latestYear);

    updateChart_graf(years_graf[currentYearIndex_graf]);
  }
</script>




      </div>
    </div>


  
    <script>

    
    </script> 






    <!-- historial_habitos -->
<!-- <script>
  // Requerir los m√≥dulos necesarios

const d3 = require('d3');

// Leer los datos del archivo CSV
let csvData = fs.readFileSync('historial_habitos.csv', 'utf8');

// Analizar los datos
var records_data = Papa.parse(csvData, {header: true}).data;

// Parsear los datos
records_data.forEach(function(d) {
    d.fecha = d3.time.format("%Y-%m-%d").parse(d.fecha);
    var duracionParts = d.duracion.split(':');
    d.duracion = duracionParts.length > 1 ? +duracionParts[1] : 0;
});

// Configurar las dimensiones y m√°rgenes del gr√°fico
var margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

// Configurar las escalas
var x = d3.time.scale().range([0, width]);
var y = d3.scale.linear().range([height, 0]);

// Configurar el SVG
var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

// Escalar los rangos de los datos
x.domain(d3.extent(records_data, function(d) { return d.fecha; }));
y.domain([0, d3.max(records_data, function(d) { return d.duracion; })]);

// Agregar el eje X
svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.svg.axis().scale(x).orient("bottom"));

// Agregar el eje Y
svg.append("g")
    .call(d3.svg.axis().scale(y).orient("left"));

// Agregar las barras
svg.selectAll(".bar")
    .data(records_data)
    .enter().append("rect")
    .attr("class", "bar")
    .attr("x", function(d) { return x(d.fecha); })
    .attr("width", width / records_data.length)
    .attr("y", function(d) { return y(d.duracion); })
    .attr("height", function(d) { return height - y(d.duracion); });

</script> -->




    <script>

      var tareas_restantes = 0


  
  
      const { ipcRenderer } = require('electron');
      //const getDataBtn = document.getElementById('get-data');
        
          ipcRenderer.send('request-data');

          var data






          ipcRenderer.on('send-data', (event, data) => {



       

          

          });

          
          function llenar_lista_habitos(nombre_lista, hecho, IsHabitoArchivado) {
            actualizar_horas_realizadas()
            var data = fs.readFileSync("data.json", 'utf8');
            var jsonData = JSON.parse(data);
            var sortedJsonData = [...jsonData].sort((a, b) => a.orden_n - b.orden_n);

            data = sortedJsonData
            //data = jsonData
            //console.log(data); // Aqu√≠ puedes usar los datos como quieras

            var lista = document.getElementById(nombre_lista);
            var records_h = leer_archivo_historial('historial_habitos.csv')
            //console.log(records_h)

            if (!hecho){
              tareas_restantes = 0
              tiempo_restante = 0
            }


            for (var i = 0; i < data.length; i++) {
              /*
              console.log(existeRegistroHoy(records_h, data[i].id))

              console.log(records_h)
              console.log(data[i].id)
              */

              if ((IsHabitoArchivado && Number(data[i].archivado))|| (!IsHabitoArchivado && !Number(data[i].archivado))){

              

              if (existeRegistroHoy(records_h, data[i].id) == hecho) {
                var numero_racha_h = calcularDiasDeRachaHastaHoy(data[i].id, records_h, hecho )

                tareas_restantes = calcular_habitos_restanten(hecho, tareas_restantes)
                tiempo_restante = calcular_tiempo_restante(hecho, tiempo_restante, data[i].work_time, data[i].count )




                var li = document.createElement("li");
                li.classList.add('elemento_lista')
                li.id = data[i].orden_n

                let objStr = JSON.stringify(data[i]);

                // Agregar la cadena de texto al atributo data-obj del elemento
                li.dataset.obj = objStr;



                var div_item_h = document.createElement('div')
                var div_botones = document.createElement('div')
                div_botones.classList.add('div_botones')
                li.appendChild(div_item_h)
                lista.appendChild(li);
                var Nombre_habito = document.createElement('div')
                var Nombre_habito_h1 = document.createElement('h1')
                var racha_habito_p = document.createElement('h6')
                Nombre_habito.classList.add('titulo_habito')
                Nombre_habito_h1.classList.add('titulo_habito_texto')
                racha_habito_p.classList.add('racha_habito_texto')
                var texto_nombre = document.createTextNode(data[i].nombre)
                var texto_numero_racha = document.createTextNode( numero_racha_h)
                racha_habito_p.appendChild(texto_numero_racha)
                
                var boton_config = document.createElement("button")
                boton_config.style.backgroundColor = data[i].color
                //boton_config.innerHTML = '<i class="material-icons">settings</i>';
                boton_config.classList.add('boton_config')
                Nombre_habito_h1.appendChild(texto_nombre)
                Nombre_habito_h1.title = data[i].work_time
                Nombre_habito.appendChild(Nombre_habito_h1)
                Nombre_habito.appendChild(racha_habito_p)
                div_item_h.appendChild(boton_config);
                div_item_h.appendChild(Nombre_habito);
                var botn = document.createElement("button")
                var botn_graf = document.createElement("button")

                
                document.body.append(botn);
                div_item_h.appendChild(div_botones)
                //var texto = document.createTextNode("ir");
                //botn.appendChild(texto);

                //var texto_graf = document.createTextNode("&#xF1F6;");
                //botn_graf.appendChild(texto_graf);

                botn_graf.innerHTML = '<i class="material-icons">calendar_today</i>';
                document.body.append(botn_graf);


                // Asignar un valor al bot√≥n
                botn.value = data[i];
                botn_graf.value = data[i];
                div_botones.appendChild(botn)
                div_botones.appendChild(botn_graf)

                div_color = document.createElement('div')
                div_color.classList.add('div_color_habito')
                div_color.style.backgroundColor = data[i].color
                div_botones.appendChild(div_color)

                //console.log(data[i])

                let objeto = data[i]

                botn.classList.add('boton_habito')
                botn_graf.classList.add('boton_habito')
                
                boton_config.addEventListener('click', function () {
                  configurar_habito(objeto)
                  cambiarVentana('ventana2')
                })

                if (data[i].type == 1) {
                  div_item_h.classList.add('item_habito')
                  botn.innerHTML = '<i class="material-icons">alarm</i>';
                  botn.addEventListener('click', function () {
                    //console.log(data[i].id)
                    ipcRenderer.send('abrir-ventana-secundaria', objeto)
                  })
                } else {
                  div_item_h.classList.add('item_habito_check')
                  botn.innerHTML = '';
                  botn.innerHTML = '<i class="material-icons">check</i>';
                  botn.addEventListener('click', function () {
                    //console.log("check-" + objeto.id)
                    
                    
                    registrar_Habitos_checker(objeto)
                    actualizar_listas()
                    definir(objeto)
                    //ipcRenderer.send('abrir-ventana-secundaria', objeto)
                  })

                }

                botn_graf.addEventListener('click', function () {
                  //console.log(data[i].id)
                 // ipcRenderer.send('abrir-ventana-grafico', objeto)
                 definir(objeto)
                 generarGraficoDuracionPorAnio(objeto.id+'');
                 //mostrar_flechas()

                })




              }
            }
          }

            //eventos_lista_habitos()
            //ordenar_lista_habitos()
            //window.onload =  ordenar_lista_habitos
            //window.onload = eventos_lista_habitos
            ordenar_lista_habitos()

            var texto_numeros_restantes = document.getElementById('tareas_restantes')
            texto_numeros_restantes.innerText = tareas_restantes

            var texto_tiempo_restante = document.getElementById('tiempo_restante')
            texto_tiempo_restante.innerText = convertirMinutosAHoras(tiempo_restante)
        }

    
    actualizar_listas()
    </script>
    


    <!-- <h1>Hello World!aaeouaoeuao</h1>
    We are using Node.js <span id="node-version"></span>,
    Chromium <span id="chrome-version"></span>,
    and Electron <span id="electron-version"></span>.

    <ul id="miLista">
    </ul>

    <button id="get-data">Obtener datos</button> -->
    <!-- <script>
      //const { ipcRenderer } = require('electron');
      const getDataBtn = document.getElementById('get-data');

      getDataBtn.addEventListener('click', () => {
        ipcRenderer.send('request-data');
      });

      ipcRenderer.on('send-data', (event, data) => {
        console.log(data); // Aqu√≠ puedes usar los datos como quieras

        var lista = document.getElementById("miLista");

      for (var i = 0; i < data.length; i++) {
          var li = document.createElement("li");
          li.appendChild(document.createTextNode(data[i].name));
          lista.appendChild(li);
          var botn = document.createElement("button")
          var texto = document.createTextNode("ir");
          botn.appendChild(texto);

          // Asignar un valor al bot√≥n
          botn.value = data[i];
          //lista.appendChild(botn)

          console.log(data[i])

          let objeto = data[i]

          botn.addEventListener('click', function () {
            //console.log(data[i].id)
            ipcRenderer.send('abrir-ventana-secundaria', objeto)
          })
}
      });
    </script> -->


    <!-- <button id="abrirPomodoro">Abrir Pomodoro</button>

<script>
document.getElementById("abrirPomodoro").addEventListener("click", function() {
    window.open("pomodoro.html", "_blank", "width=200,height=200");
});
</script>

<button id="miBoton">
  aaaa
</button> -->



<!-- <script>
  
  document.getElementById("miBoton").addEventListener("click", function() {
      ipcRenderer.send('abrir-ventana-secundaria');
  });
  </script> -->



  <!-- <button id="cerrar">Cerrar ventana</button> -->

  <!-- <script>
    const { remote } = require('electron');
    
    document.getElementById("cerrar").addEventListener("click", function() {
        var ventana = remote.getCurrentWindow();
        ventana.close();
    });
    </script> -->




    <!-- <button id="btn1" value="1">1</button>
<button id="btn2" value="2">2</button>
<button id="btn3" value="3">3</button> -->

<!-- <script>
//const { ipcRenderer } = require('electron')

document.getElementById('btn1').addEventListener('click', function () {
  console.log('1')
  ipcRenderer.send('abrir-ventana-secundaria', this.value)
})

document.getElementById('btn2').addEventListener('click', function () {
  ipcRenderer.send('abrir-ventana-secundaria', this.value)
})

document.getElementById('btn3').addEventListener('click', function () {
  ipcRenderer.send('abrir-ventana-secundaria', this.value)
})
</script>
 -->

 <!-- <script src="node_modules/d3/dist/d3.min.js"></script>
 <script src="node_modules/papaparse/papaparse.min.js"></script>
  -->

<script>
// Primero, necesitas instalar heatmap.js en tu proyecto
// npm install heatmap.js

// Luego, en tu archivo JavaScript, puedes crear un heatmap as√≠:

/*

var h337 = require('heatmap.js');

// Aseg√∫rate de que el contenedor es un Element
var container = document.querySelector('.heatmap');

if (container instanceof Element) {
  var heatmapInstance = h337.create({
    container: container
  });

  var points = [];
  var max = 0;
  var len = 200;
  
  while (len--) {
    var val = Math.floor(Math.random()*100);
    max = Math.max(max, val);
    var point = {
      x: Math.floor(Math.random()*width),
      y: Math.floor(Math.random()*height),
      value: val
    };
    points.push(point);
  }
  
  var data = { 
    max: max, 
    data: points 
  };
  
  heatmapInstance.setData(data);
} else {
  console.error('El contenedor no es un Element');
}
*/

</script>



 





  

  







  </body>
</html>